# 로그인 처리 - 쿠키, 세션 
## 로그인 상태 유지 
#### 쿼리 파라미터를 계속 유지하면서 보내는 것은 어렵기 때문에 쿠키를 사용할 수 있다.

<br>

## 쿠키 
#### 서버에서 로그인이 성공하면 HTTP 응답에 쿠키를 담아서 브라우저에 전달 -> 브라우저는 앞으로 해당 쿠키를 지속해서 보내준다.
#### 종류
- 영속 쿠키: 만료 날짜를 입력하면 해당 날짜까지 유지 
- 세션 쿠키: 만료 날짜를 생략하면 브라우저 종료시 까지만 유지  (HTTP 세션과는 관련이 없다.)

<br>

## 쿠키 보안
#### 쿠키 값은 임의로 변경할 수 있다.
#### 쿠키에 보관된 정보는 훔쳐갈 수 있다.

<br>

## 쿠키 대안 
#### 쿠키에 중요한 값을 노출하지 않고, 사용자 별로 예측 불가능한 토큰 값을 노출하여 서버에서 토큰과 사용자 ID 매핑해서 인식
#### 토큰은 해커가 임의의 값을 넣어도 예측이 불가능 해야함
#### 토큰 만료 시간은 짧게 

<br>

## 세션
#### 서버에 중요한 정보를 보관하고 연결을 유지하는 방법 
#### 세션 ID 는 추정이 불가능해야 한다.
- UUID 는 추청이 불가능 하다.

#### 생성된 세션 ID 와 세션에 보관해야할 값을 서버의 세션 저장소에 보관한다.
#### 클라이언트와 서버는 결국 쿠키로 연결이 되어야 한다.
- 서버는 클라이언트에 `mySessionId` 라는 이름으로 세션 ID 만 쿠키에 담아서 전달
- 클라이언트는 쿠키 저장소에 `mySessionId` 쿠키를 ㅂ관 

#### 회원과 관련된 정보는 클라이언트에 전달하면 안된다.
#### 오직 추청 불가능한 세션 ID 만 쿠키를 통해 클라이언트에 전달한다.

<br>

## Servlet Http Session
#### 서블릿이 제공하는 HttpSession 
#### 세션이 생성되면 쿠키 이름은 JSESSION 이고, 값은 추정 불가능한 랜덤 값이다.

<br>

## @SessionAttribute
#### 스프링은 세션을 더 편리하게 사용할 수 있도록 해당 어노테이션을 지원한다.
#### 예시: @SessionAttribute(name = "loginMember", required = false) Member loginMember
#### 만약 URL 전달 방식을 Off 시키고 싶다면 ??
- server.servlet.session.tracking-modes=cookie

